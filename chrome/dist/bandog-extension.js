(()=>{var x=Object.create;var j=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var O=Object.getOwnPropertyNames;var P=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty;var L=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var S=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of O(e))!R.call(n,i)&&i!==t&&j(n,i,{get:()=>e[i],enumerable:!(r=A(e,i))||r.enumerable});return n};var _=(n,e,t)=>(t=n!=null?x(P(n)):{},S(e||!n||!n.__esModule?j(t,"default",{value:n,enumerable:!0}):t,n));var E=L(o=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});o.DropPolicy=void 0;o.default=M;var g=new Map,u;(function(n){n[n.Reject=0]="Reject",n[n.DropOldest=1]="DropOldest"})(u||(o.DropPolicy=u={}));var a=class{constructor(e){this.queue=[],this.timer=null,this.settings=e}};function D(n){let{id:e}=n;if(g.has(e))return g.get(e);{let t=new a(n);return g.set(e,t),t}}function M(n,e,t={id:0}){let r=t.id===0?new a(t):D(t);function i(){let c=r.queue.shift();c&&c.action(),r.queue.length===0&&r.timer!==null&&(clearInterval(r.timer),r.timer=null)}function U(...c){var f;let{maxQueueSize:h,dropPolicy:m}=r.settings,y,b,w=new Promise((s,l)=>{y=s,b=l}),p={action:()=>y(n(...c)),reject:s=>{b(s)},id:t.id};if(w.cancel=s=>{let l=r.queue.indexOf(p);l!==-1&&(r.queue.splice(l,1),p.reject(s||new Error("Cancelled by user.")))},h!==void 0&&r.queue.length>=h){if(m===u.Reject)return Promise.reject(new Error("Queue is at max capacity."));m===u.DropOldest&&((f=r.queue.shift())===null||f===void 0||f.reject(new Error("Queue is at max capacity.")))}return r.queue.push(p),r.timer===null&&(i(),r.timer=setInterval(i,e)),w}return U}});var q=_(E()),X=Object.freeze("https://data.objkt.com/v3/graphql"),G=21337,Q=600;function $(n){return{operationName:"GetXUserAddress",query:"query GetXUserAddress($xLinks: [String!]!) { holder(where: { twitter: { _in: $xLinks }, flag: { _eq: none }}) {address alias}}",variables:{xLinks:n}}}function z(n){return new Promise(e=>{fetch(X,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)}).then(t=>t.json()).then(t=>e(t)).catch(()=>e(null))})}function C(n){return new Promise(e=>{n===null?e([]):z($([`https://x.com/${n}`,`https://twitter.com/${n}`])).then(t=>t==null?void 0:t.data).then(t=>t==null?void 0:t.holder.map(r=>r.address)).then(t=>e(t!=null?t:[])).catch(()=>e([]))})}var I={GetXUserTezosAddresses:(0,q.default)(C,Q,{id:G})};var d=new Map;function H(n){var r;let e=n.closest('[data-testid="tweet"]');if(!e)return null;let t=e.querySelector('a[href^="/"][role="link"]');return t&&((r=t.getAttribute("href"))==null?void 0:r.slice(1))||null}function v(n,e){var t;((t=e==null?void 0:e.length)!=null?t:0)>0&&(n.style.display="flex",n.addEventListener("click",()=>{window.open(`https://bandog.pet/scanner/${e[0]}`)}))}function N(n){let e=document.createElement("img");return e.src="https://bandog.pet/png/logo-white.png",e.style.objectFit="contain",e.title=n,e}function T(){document.querySelectorAll('[data-testid="bookmark"]').forEach(e=>{if((e==null?void 0:e.parentElement)===null||e.parentElement.querySelector(".bandog-button"))return;let t=H(e);if(t==null)return;let r=document.createElement("button");r.className="bandog-button",r.style.background="none",r.style.border="none",r.style.marginRight="18px",r.style.cursor="pointer",r.style.padding="0",r.style.width="16px",r.style.height="20px",r.appendChild(N(`Scan @${t} on Bandog!`)),r.style.display="none",e==null||e.parentElement.insertBefore(r,e),d.has(t)?v(r,d.get(t)):I.GetXUserTezosAddresses(t).then(i=>i).then(i=>{d.has(t)||d.set(t,i),v(r,i)})})}var F=new MutationObserver(T);F.observe(document.body,{childList:!0,subtree:!0});T();})();
